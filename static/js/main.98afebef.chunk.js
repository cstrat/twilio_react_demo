(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,n,t){e.exports=t(236)},234:function(e,n,t){},236:function(e,n,t){"use strict";t.r(n);var a=t(0),l=t.n(a),c=t(5),o=t.n(c),i=t(36),r=t(33),u=t(240);function m(e){var n=e.feed;return l.a.createElement("ul",{id:"activityLog"},n.map(function(e,n){return l.a.createElement("li",{key:n},e)}))}var s=t(239),d=t(82),E=t(50),f=t(73),g=t(32);function C(e){var n=Object(a.useState)(null),t=Object(r.a)(n,2),c=t[0],o=t[1],i=Object(a.useState)(!1),u=Object(r.a)(i,2),m=u[0],C=u[1],O=Object(a.useState)(null),v=Object(r.a)(O,2),N=v[0],b=v[1],S=e.connected,p=e.device,j=e.log;return Object(a.useEffect)(function(){fetch("https://red-goat-4208.twil.io/capability-token").then(function(e){return e.json()}).then(function(e){e.token?(j("\ud83d\udd11 Auth Token Recieved!"),C(!1),o(e.token)):b("Error Fetching Token!")})},[]),l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{isOpen:N,onClose:function(){b(null)}},N),l.a.createElement(d.a,{isOpen:!S,title:"Twilio Agent Demo"},l.a.createElement("div",{className:E.a.DIALOG_BODY},l.a.createElement("p",null,l.a.createElement("strong",null,"Before you can recieve calls this client will need to be authorised, fetching your token now..."))),l.a.createElement("div",{className:E.a.DIALOG_FOOTER},l.a.createElement("div",{className:E.a.DIALOG_FOOTER_ACTIONS},l.a.createElement(f.a,{intent:c?g.a.SUCCESS:g.a.NONE,loading:m,icon:c?"endorsed":"offline",disabled:!c,onClick:function(){p.setup(c)}},"Ready Up")))))}var O=t(31),v=t(119),N=t(237),b=t(120),S=t(125),p=t(6);function j(e){var n=Object(a.useState)(!1),t=Object(r.a)(n,2),c=t[0],o=t[1],i=e.connected,u=e.log,m=e.logCall,s=e.callState,d=e.setCallState,f=s.ringing,g=s.onCall,C=s.callerID,j=s.connection;return l.a.createElement("div",{id:"menu"},l.a.createElement("strong",null,"Twilio Agent Demo"),l.a.createElement("br",null),l.a.createElement("em",null,l.a.createElement(O.a,{className:i?E.a.INTENT_SUCCESS:E.a.INTENT_DANGER,icon:i?"confirm":"offline"})," ",i?"Online!":"Offline"),l.a.createElement(v.a,{id:"actionMenu",className:E.a.ELEVATION_1},f||g?l.a.createElement(N.a,{className:g?E.a.INTENT_WARNING:E.a.INTENT_SUCCESS,icon:"phone",text:g?"End Call":"Answer Call",onClick:function(){g?(j.disconnect(),d({ringing:!1,onCall:!1,callerID:null,connection:null})):j.accept()}}):l.a.createElement(b.a,{title:"No Active Calls"}),f&&l.a.createElement(N.a,{className:E.a.INTENT_DANGER,icon:"phone",text:"Reject Call",onClick:function(){u("\u274c Call Rejected."),m(s.From,"Call Rejected"),j.reject(),d({ringing:!1,onCall:!1,callerID:null,connection:null})}}),C&&l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,null),l.a.createElement(S.a,{content:"Click here to ".concat(c?"unmute":"mute"," call."),position:p.a.BOTTOM},l.a.createElement(N.a,{className:c&&E.a.INTENT_WARNING,text:C,icon:c?"volume-off":"volume-up",onClick:function(){if(s.onCall){var e=j.isMuted();o(!e),j.mute(!e)}}})))))}var I=t(99);function T(e){var n=e.log,t=Object(i.a)(n).reverse()||[];return l.a.createElement("ul",{id:"callLog"},t.map(function(e,n){return l.a.createElement("li",{key:n},Object(I.format)(e.date,"YY/MM/DD - HH:mm A"),": ",e.from," - ",e.status)}))}t(228),t(230),t(232),t(234);u.a.onlyShowFocusOnTabs();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(function(){var e=Object(a.useState)(!1),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)([]),u=Object(r.a)(o,2),s=u[0],d=u[1],E=Object(a.useState)([]),f=Object(r.a)(E,2),g=f[0],O=f[1],v=Object(a.useState)({ringing:!1,onCall:!1,callerID:null,connection:null}),N=Object(r.a)(v,2),b=N[0],S=N[1];function p(e){s.push(e),d(s)}function I(e,n){var t={date:new Date,from:e,status:n};O([].concat(Object(i.a)(g),[t]))}var D=new Twilio.Device;return function(e){var n=e.device,t=e.setConnected,a=e.log,l=e.logCall,c=e.callState,o=e.setCallState;n.on("ready",function(){t(!0),a("\ud83d\udc4d Client Ready.")}),n.on("incoming",function(e){a("\ud83d\udcde Incoming Call: ".concat(e.parameters.From)),o({ringing:!0,onCall:!1,callerID:e.parameters.From,connection:e})}),n.on("connect",function(e){a("\ud83d\udcde Call Established."),o({ringing:!1,onCall:!0,callerID:e.parameters.From,connection:e})}),n.on("disconnect",function(e){a("\u274c Call Disconnected."),l(c.callerID,"Call Completed"),o({ringing:!1,onCall:!1,callerID:null,connection:null})}),n.on("cancel",function(e){a("\u274c Caller Hung Up."),l(c.callerID,"Call Abandoned"),o({ringing:!1,onCall:!1,callerID:null,connection:null})})}({device:D,setConnected:c,log:p,callState:b,setCallState:S,logCall:I}),l.a.createElement(l.a.Fragment,null,l.a.createElement(C,{connected:t,setConnected:c,device:D,log:p}),l.a.createElement("div",{id:"frame"},l.a.createElement(j,{connected:t,device:D,log:p,logCall:I,callState:b,setCallState:S}),l.a.createElement(m,{feed:s}),t&&l.a.createElement(T,{log:g})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[104,2,1]]]);
//# sourceMappingURL=main.98afebef.chunk.js.map